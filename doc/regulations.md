## NEWorld 多人协作开发规范

### 前言

为了提高团队协作的工作效率、避免不必要的麻烦，各位开发人员有必要遵守一些规则。

### 第一节 代码文件规范

0. 所有代码和文本文件都使用**UTF-8(无BOM)**编码，末尾要加空行(推荐使用`Notepad++`等进行文件格式检查)。
0. **严禁**擅自修改许可证。

### 第二节 Git使用及GitHub使用规范

0. 进行push操作时请**仔细检查**，不要上传目标代码二进制文件。
0. **严禁**恶意上传大文件或二进制文件，或者恶意修改他人代码，否则将施以严厉处罚。
0. 所有分支都应属于项目的一部分，除releases分支外都应计划最终合并到主分支。
0. 经常浏览issues，解决属于你范围的issues。
0. 当本地与远程的commit历史出现差异时，使用`rebase`而不是`merge`。
0. 文档编写者应尽自己所能使别人能清晰地看出你想表达什么。文档包括但不限于`Markdown`格式的*所有*文件，`doc`目录下的*所有*文件，提交说明，里程碑说明，Release说明，代码注释。要善于利用格式。

### 第三节 合作开发规范

0. 请开发人员加入NEWorld开发组的QQ群以便交流，群号为308354849。
0. 确保主要开发人知晓并同意你要做的大修改(包括但不限于重构，加入新库)。
0. 若覆写Git库，请通知其他开发者。

### 第四节 C/C++代码规范

#### 4.1 缩进风格

0. 所有代码使用**4个空格**缩进(大多数IDE都可以设置缩进方法)。
0. 原则上使用Allman/BSD代码风格，`namespace`中的代码缩进(推荐使用AStyle工具进行自动格式化，标准参数为`--style=allman --indent=spaces=4 --indent-namespaces --keep-one-line-blocks --indent-preproc-block --indent-preproc-define --mode=c`)。

```C++
namespace Hashing
{
    void initCRC32Table()
    {
        if(CRC32TableInitialized)
        {
            return;
        }
        // ...
    }
}
```

#### 4.2 代码编写

使用正确的C/C++语法和规则编写正确的C/C++代码，每个人对自己写的代码负责。

#### 4.3 命名风格

类名使用大驼峰，函数名/变量名使用小驼峰。

#### 4.4 代码注释

0. 函数要在声明前一行加注释说明其功能；推荐在大段代码中在某些位置加注释以说明代码。
0. 不以说明代码为目的的注释允许适当出现。

#### 4.5 外部依赖库

确保你使用的库都是可以跨平台(Windows, Linux, UNIX)的。

### 第五节 处罚条例

0. 当出现恶意地上传二进制文件/大文件等在本文件中注明“施以严厉处罚”的行为，由全体开发者讨论决定处罚方案。
0. 处罚的级别有以下4种。

- 警告
- 严厉书面警告
- 临时剥夺write权利
- 剥夺write权利(当事人提出恢复权限的申请，并由全体开发者讨论决定之后，可以恢复write权利)

### 第六节 附则

0. 一般来说一个月左右会检查repo中是否存在垃圾文件，若存在过多垃圾文件则会覆写并在issues里声明，届时请各位开发者重新clone。
0. 对于"恶意上传二进制文件/大文件"**可能的**判定标准：多次上传与项目无关的二进制文件或在一个月内累计上传超过100MB的垃圾文件。
0. 对于"恶意修改他人代码/添加新库"**可能的**判定标准：做出错误修改并被其他成员劝阻和revert后再次做出本质上相同的错误修改。
